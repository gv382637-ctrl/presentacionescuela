<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Examen Acad√©mico Profesional</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Segoe UI', sans-serif; background: #000; margin: 0; color: white; min-height: 100vh; }
        .app-container { width: 100%; max-width: 500px; margin: 0 auto; min-height: 100vh; display: flex; flex-direction: column; background: #121212; position: relative; }
        .content { padding: 20px; flex: 1; overflow-y: auto; }
        .step { display: none; animation: fadeIn 0.3s ease; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        img { width: 100%; height: 150px; object-fit: contain; border-radius: 15px; margin-bottom: 15px; background: #1a1a1a; display: none; }
        .box { background: #1e1e1e; padding: 15px; border-left: 5px solid #007bff; border-radius: 10px; margin-bottom: 20px; }
        .btn { background: #007bff; color: #fff; border: none; padding: 16px; border-radius: 14px; width: 100%; font-weight: bold; cursor: pointer; margin-bottom: 10px; font-size: 1rem; }
        .check-item { background: #252525; border: 1px solid #444; color: white; padding: 14px; border-radius: 12px; width: 100%; margin-bottom: 10px; display: flex; align-items: center; cursor: pointer; }
        .check-item input { margin-right: 15px; transform: scale(1.5); cursor: pointer; }
        .btn-opt { background: #252525; border: 1px solid #444; color: white; padding: 14px; border-radius: 12px; width: 100%; margin-bottom: 10px; text-align: left; cursor: pointer; transition: 0.3s; display: block; }
        .v-box { display: flex; gap: 10px; margin-bottom: 15px; }
        .v-btn { flex: 1; padding: 12px; border-radius: 10px; border: none; font-weight: bold; color: white; cursor: pointer; }
        #v-feed { font-size: 0.8rem; text-align: center; margin-bottom: 10px; padding: 8px; border-radius: 8px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .cat { background: #1a1a1a; padding: 20px 5px; border-radius: 15px; border: 1px solid #333; text-align: center; cursor: pointer; }
        .promo-text { font-size: 0.9rem; line-height: 1.4; color: #e0e0e0; margin-bottom: 15px; }
        .promo-list { list-style: none; padding: 0; margin: 10px 0; }
        .promo-list li { margin-bottom: 8px; font-size: 0.85rem; }
        .btn-regresar { background: #444; margin-bottom: 15px; }
        .stars { font-size: 2.2rem; margin: 10px 0; cursor: pointer; color: #444; }
        .stars span.gold { color: #ffc107; text-shadow: 0 0 5px rgba(255,193,7,0.5); }
        .stats-display { font-size: 0.9rem; color: #ffc107; margin-bottom: 5px; font-weight: bold; text-align: center; }
        .input-info { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #444; background: #252525; color: white; margin-bottom: 15px; }
        .calc-container { background: white; color: #333; padding: 20px; border-radius: 15px; margin-top: 10px; }
        .calc-input-box { display: flex; flex-direction: column; margin-bottom: 10px; }
        .calc-input-box label { font-weight: bold; font-size: 13px; margin-bottom: 5px; color: #444; }
        .calc-input-box input { padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 14px; color: #333; }
        .desglose-lista { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 15px; display: none; border-left: 5px solid #1a73e8; }
        .item-lista { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #ddd; font-size: 14px; }
        .total-pago { font-weight: bold; color: #1a73e8; border-top: 2px solid #1a73e8; margin-top: 10px; padding-top: 5px; font-size: 18px; }
    </style>
</head>
<body onload="initApp()">

<div class="app-container">
    <div class="content">
        <div id="s1" class="step active">
            <div class="box"><h3 style="margin:0; color:#007bff">¬°Hola, comunidad! üéì</h3></div>
            <div id="welcome-stats" class="stats-display" style="background: #1e1e1e; padding: 10px; border-radius: 10px; margin-bottom: 15px;">Cargando calificaci√≥n...</div>
            <div class="promo-text">
                <p><b>¬øNecesitas asesor√≠a con tus materias o proyectos?</b></p>
                <p>Somos un grupo de 3 personas de distintas universidades, egresados de maestr√≠a en distintas disciplinas. Ofrecemos nuestra gu√≠a para ayudarte a dominar esos temas dif√≠ciles.</p>
                <ul class="promo-list">
                    <li>‚úÖ Administraci√≥n, RH y Psicolog√≠a.</li>
                    <li>‚úÖ Ingenier√≠a Industrial y Procesos.</li>
                    <li>‚úÖ Contabilidad y Finanzas.</li>
                    <li>‚úÖ Proyectos y Simplificaci√≥n de actividades.</li>
                </ul>
                <p>üí∞ <b>Costos accesibles:</b> el fin de este proyecto es recaudar para nuestra titulacion.</p>
            </div>
            <button class="btn" onclick="go(2)">VER MATERIAS</button>
        </div>

        <div id="s2" class="step">
            <button class="btn btn-regresar" onclick="go(1)">‚¨ÖÔ∏è REGRESAR</button>
            <div class="box"><h2>Selecciona Materia</h2></div>
            <div class="grid" id="menu"></div>
        </div>

        <div id="s-paginas" class="step">
            <button class="btn btn-regresar" onclick="go(2)">‚¨ÖÔ∏è REGRESAR A MATERIAS</button>
            <div class="box"><h3>P√°ginas Web</h3></div>
            <button class="btn" onclick="window.location.href='https://gv382637-ctrl.github.io/RESTRIGCIONES.1/'">C√°lculo de restricciones</button>
            <button class="btn" onclick="window.location.href='https://quinielas580.github.io/quiniela-la-perrona-jornada1-liga-mx2026/'">quiniela web</button>
        </div>

        <div id="s-nominas" class="step">
            <button class="btn btn-regresar" onclick="go(2)">‚¨ÖÔ∏è REGRESAR A MATERIAS</button>
            <div class="calc-container">
                <div style="text-align: center; margin-bottom: 15px;"><h1 style="color: #1a73e8; margin: 5px 0; font-size: 22px;">EMPRESA VILLANUEVA</h1></div>
                <div class="calc-input-box"><label>No. de N√≥mina</label><input type="text" id="v-numNomina" placeholder="Ej. 687"></div>
                <div class="calc-input-box"><label>Nombre del Empleado</label><input type="text" id="v-nombre" placeholder="Nombre completo"></div>
                <div class="calc-input-box"><label>Sueldo Diario ($)</label><input type="number" id="v-sd" step="0.01"></div>
                <div class="calc-input-box"><label>D√≠as Laborados</label><input type="number" id="v-dias" value="6"></div>
                <div class="calc-input-box"><label>Fecha de Pago</label><input type="date" id="v-fechaPago"></div>
                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <button class="btn" style="background: #1a73e8; padding: 12px; flex: 1;" onclick="calcularVillanueva()">CALCULAR</button>
                    <button class="btn" style="background: #d93025; padding: 12px; flex: 1;" onclick="descargarVillanueva()">PDF</button>
                </div>
                <div id="v-desglose" class="desglose-lista">
                    <div class="item-lista"><span>Base Gravable:</span> <span id="v-l-base"></span></div>
                    <div class="item-lista" style="color:#d93025"><span>ISR:</span> <span id="v-l-isr"></span></div>
                    <div class="item-lista" style="color:#d93025"><span>IMSS:</span> <span id="v-l-imss"></span></div>
                    <div class="item-lista total-pago"><span>PAGO NETO:</span> <span id="v-l-neto"></span></div>
                </div>
            </div>
        </div>

        <div id="s3" class="step">
            <button class="btn btn-regresar" onclick="go(2)">‚¨ÖÔ∏è REGRESAR A MATERIAS</button>
            <h4 id="q-head" style="color:#007bff; margin:0 0 10px 0"></h4>
            <img id="q-img" src="">
            <div id="v-ui" style="display:none">
                <div class="v-box">
                    <button class="v-btn" style="background:#444" onclick="hablar()">üîä O√≠r</button>
                    <button class="v-btn" style="background:#28a745" onclick="escuchar()">üé§ Pronunciar</button>
                </div>
                <div id="v-feed"></div>
            </div>
            <div class="box"><h2 id="q-txt" style="font-size:1.1rem"></h2></div>
            <div id="options"></div>
            <div id="fb-box" style="display:none; text-align:center;">
                <p id="fb-txt" style="font-weight:bold"></p>
                <button class="btn" onclick="sig()">Siguiente</button>
            </div>
        </div>

        <div id="s4" class="step">
            <div style="background:#007bff; padding:25px; border-radius:20px; text-align:center">
                <h3 style="margin:0">Resultado</h3>
                <h1 id="res-txt" style="font-size:4rem; margin:0">0</h1>
                <p>de 10 aciertos</p>
            </div>
            <button class="btn" style="margin-top:20px; background:#333" onclick="location.reload()">Reiniciar</button>
            <button class="btn" style="background:#6c757d" onclick="document.getElementById('rating-area').style.display='block'; showStats();">Calificar mi p√°gina</button>
            
            <div id="rating-area" style="display:none; text-align:center; margin-top:20px;">
                <div id="stats-stars" class="stats-display"></div>
                <div class="stars" id="star-box">
                    <span onclick="setRate(1)">‚òÖ</span><span onclick="setRate(2)">‚òÖ</span><span onclick="setRate(3)">‚òÖ</span><span onclick="setRate(4)">‚òÖ</span><span onclick="setRate(5)">‚òÖ</span>
                </div>
                <button class="btn" style="background:#28a745" onclick="go('info')">Solicitar Informaci√≥n</button>
            </div>
        </div>

        <div id="s-info" class="step">
            <button class="btn btn-regresar" onclick="go(4)">‚¨ÖÔ∏è REGRESAR</button>
            <div class="box"><h3>Solicitar Informaci√≥n</h3></div>
            <input type="tel" id="user-phone" class="input-info" placeholder="Tu n√∫mero de tel√©fono">
            <div id="info-options">
                <label class="check-item"><input type="checkbox" name="tema" value="Ayuda tareas/proyectos"> Opci√≥n 1: Ayudas para tareas</label>
                <label class="check-item"><input type="checkbox" name="tema" value="M√©todo estudio examen"> Opci√≥n 2: M√©todo estudio</label>
                <label class="check-item"><input type="checkbox" name="tema" value="Curso Excel"> Opci√≥n 3: Curso Excel</label>
                <label class="check-item"><input type="checkbox" name="tema" value="App de Ingl√©s"> Opci√≥n 4: App Ingl√©s</label>
                <label class="check-item"><input type="checkbox" name="tema" value="Simplificaci√≥n actividades"> Opci√≥n 5: Simplificaci√≥n laboral</label>
                <label class="check-item"><input type="checkbox" name="tema" value="Desarrollo p√°gina web/negocio"> Opci√≥n 6: Desarrollo web o negocio</label>
            </div>
            <button class="btn" style="background:#17a2b8;" onclick="compartirWhatsApp()">COMPARTIR CON AMIGOS</button>
            <button class="btn" style="background:#28a745;" onclick="enviarVariasRespuestas()">SOLICITAR POR WHATSAPP</button>
        </div>
    </div>
</div>

<script>
    // URL DEL SCRIPT EN POSICI√ìN GLOBAL PARA QUE FUNCIONE SIEMPRE
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzSyZd3eI-1aE3CGXL4szWXlIixF1q-4ZTpGx3CGBgJ84pvyx-hlHE5RalVtemYn2hH/exec';

    const db = {
        ingles: [
            {q:"Identify the correct location based on the image: Where are these people currently located?", img:"PARKE.png", opt:["In the park","In the pool","In the gym"], c:0},
            {q:"According to the action shown in the picture: What are the people doing right now?", img:"CORRIENDO.png", opt:["Sleeping","Running","Reading"], c:1},
            {q:"Count the individuals present in the scene: How many people can you see?", img:"COMIENDO.png", opt:["Two","Three","Five"], c:2},
            {q:"Based on her uniform and tools: What is the specific profession of this woman?", img:"ENFERMERA.png", opt:["Chef","Nurse","Pilot"], c:1},
            {q:"Analyze the context of the image: What activity is he performing at this moment?", img:"ESTUDIANDO.png", opt:["Studying","Cooking","Driving"], c:0},
            {q:"Observe the setting and the person: Who is she and what is her role in this environment?", img:"MAESTRA.png", opt:["Singer","Student","Teacher"], c:2},
            {q:"Visual identification: What is the primary color of the car shown in the image?", img:"COLORES.png", opt:["Red","Blue","Grey"], c:0},
            {q:"Mathematical counting exercise: How many apples are displayed in the picture?", img:"NUMEROS.png", opt:["One","Four","Ten"], c:1},
            {q:"Time measurement: According to the analog clock, what specific time is it showing?", img:"RELOJ.png", opt:["1:00","3:00","9:00"], c:1},
            {q:"Activity recognition: Which verb best describes what they are doing in the photo?", img:"COMIENDO.png", opt:["Eating","Walking","Crying"], c:0}
        ],
        excel: [
            {q:"¬øCu√°l es el s√≠mbolo obligatorio con el que se debe iniciar cualquier f√≥rmula o funci√≥n para que Excel realice una operaci√≥n matem√°tica?", opt:["Signo Mas (+)","Signo Igual (=)","Signo Asterisco (*)"], c:1},
            {q:"¬øQu√© funci√≥n se utiliza espec√≠ficamente para sumar todos los n√∫meros contenidos en un rango de celdas seleccionado?", opt:["=SUMA","=ADD","=TOTAL"], c:0},
            {q:"¬øQu√© s√≠mbolo se utiliza para crear una referencia absoluta (fijar celda) y evitar que cambie al copiar una f√≥rmula?", opt:["Signo de Pesos ($)","Signo de Gato (#)","Signo de Ampersand (&)"], c:0},
            {q:"¬øCu√°l es la extensi√≥n de archivo est√°ndar que utiliza Microsoft Excel para guardar libros de trabajo modernos?", opt:[".xlsx",".docx",".txt"], c:0},
            {q:"¬øC√≥mo se le denomina t√©cnicamente a la intersecci√≥n o cruce entre una fila y una columna en una hoja de c√°lculo?", opt:["Rango de datos","Celda","Hoja de trabajo"], c:1},
            {q:"¬øCu√°l es la combinaci√≥n de teclas (atajo) utilizada para copiar el contenido de una celda seleccionada al portapapeles?", opt:["Ctrl + C","Ctrl + V","Ctrl + Z"], c:0},
            {q:"¬øQu√© funci√≥n se debe emplear para obtener la media aritm√©tica de un grupo de valores num√©ricos en un rango?", opt:["=MEDIA","=PROMEDIO","=SUM"], c:1},
            {q:"¬øQu√© acci√≥n permite unir dos o m√°s celdas adyacentes para convertirlas en una sola celda de mayor tama√±o?", opt:["Dividir celdas","Combinar celdas","Mover contenido"], c:1},
            {q:"En la estructura de la hoja de c√°lculo, ¬øc√≥mo se identifican visualmente las filas (horizontalmente)?", opt:["Por N√∫meros","Por Letras","Por S√≠mbolos"], c:0},
            {q:"En la estructura de la hoja de c√°lculo, ¬øc√≥mo se identifican visualmente las columnas (verticalmente)?", opt:["Por N√∫meros","Por Letras","Por Colores"], c:1}
        ],
        admin: [
            {q:"Dentro del proceso administrativo, ¬øcu√°l es la fase inicial donde se definen objetivos, estrategias y planes de acci√≥n?", opt:["Control","Planeaci√≥n","Direcci√≥n"], c:1},
            {q:"¬øQu√© significan las siglas de la herramienta de an√°lisis estrat√©gico FODA, utilizada para evaluar la situaci√≥n de una empresa?", opt:["Fortalezas, Oportunidades, Debilidades y Amenazas","Factores, Operaciones, Datos y An√°lisis","Finanzas, Objetivos, Direcci√≥n y Alcance"], c:0},
            {q:"¬øQui√©n es considerado el padre de la Administraci√≥n Cl√°sica por sistematizar el comportamiento gerencial y los 14 principios?", opt:["Frederick Taylor","Henri Fayol","Abraham Maslow"], c:1},
            {q:"¬øA qu√© se refiere el departamento de Recursos Humanos (RH) dentro de la estructura organizacional?", opt:["Gesti√≥n de Capital Financiero","Gesti√≥n del Capital Humano y Personal","Gesti√≥n de Maquinaria"], c:1},
            {q:"¬øQu√© concepto define la 'raz√≥n de ser' de una organizaci√≥n, explicando su prop√≥sito y funci√≥n actual en el mercado?", opt:["Visi√≥n Empresarial","Misi√≥n Organizacional","Logotipo"], c:1},
            {q:"¬øQu√© es un organigrama y para qu√© sirve dentro de una empresa?", opt:["Es un gr√°fico que representa la estructura jer√°rquica y √°reas","Es un mapa para encontrar las oficinas","Es un dibujo de los empleados"], c:0},
            {q:"¬øQu√© mide el concepto de 'Eficiencia' en la administraci√≥n de procesos productivos?", opt:["El uso √≥ptimo de los recursos para lograr un fin","El aumento de gastos innecesarios","La cantidad total de ventas"], c:0},
            {q:"¬øA qu√© hace referencia el concepto de 'Marketing Mix' utilizado para la estrategia de posicionamiento?", opt:["Las 4 Ps (Producto, Precio, Plaza, Promoci√≥n)","Las 5 Ss (Orden y limpieza)","Normas ISO de calidad"], c:0},
            {q:"¬øCu√°l es la funci√≥n principal de la fase de 'Control' en el proceso administrativo?", opt:["Medir resultados y corregir desviaciones","Comprar materia prima","Vender productos al cliente"], c:0},
            {q:"¬øQu√© caracter√≠stica principal distingue a un L√≠der efectivo dentro de un equipo de trabajo?", opt:["Capacidad de mandar por autoridad","Capacidad de inspirar e influir positivamente","Capacidad de dudar de sus metas"], c:1}
        ],
        industrial: [
            {q:"¬øQu√© es la metodolog√≠a japonesa 5S y cu√°l es su objetivo principal en el √°rea de trabajo?", opt:["Sistema para el orden, limpieza y estandarizaci√≥n","Sistema para aumentar las ventas mensuales","Sistema de producci√≥n masiva"], c:0},
            {q:"¬øEn qu√© consiste el sistema de producci√≥n 'Just in Time' (Justo a Tiempo)?", opt:["Mantener mucho stock en bodega","Producir solo lo necesario en el momento preciso","Entregar pedidos con retraso"], c:1},
            {q:"¬øQu√© significa el concepto de mejora continua conocido como 'Kaizen'?", opt:["Cambio a mejor mediante pasos peque√±os y constantes","Parar la producci√≥n totalmente","Exportar productos a otros pa√≠ses"], c:0},
            {q:"¬øA qu√© se refiere el t√©rmino 'Cuello de Botella' dentro de una l√≠nea de producci√≥n?", opt:["A la fase m√°s fluida del proceso","A la fase que limita la capacidad total por ser la m√°s lenta","A la entrada de materia prima"], c:1},
            {q:"¬øQu√© es un KPI (Key Performance Indicator) y para qu√© se utiliza en la industria?", opt:["Un indicador clave de desempe√±o para medir procesos","Una pieza de repuesto para m√°quinas","Un operario especializado"], c:0},
            {q:"¬øCu√°l es el objetivo primordial de la metodolog√≠a 'Lean Manufacturing'?", opt:["Eliminar desperdicios que no agregan valor","Aumentar los costos de fabricaci√≥n","Hacer los procesos m√°s lentos"], c:0},
            {q:"¬øQu√© es la Ergonom√≠a y qu√© mide en el entorno laboral?", opt:["El dise√±o del lugar de trabajo para adaptarse a la postura corporal","El color de las paredes de la oficina","El peso total de los productos fabricados"], c:0},
            {q:"¬øQu√© mide la metodolog√≠a 'Six Sigma' en t√©rminos de calidad de productos?", opt:["El nivel de defectos, buscando casi la perfecci√≥n","El nivel de ventas anuales","El nivel de ruido en la planta"], c:0},
            {q:"¬øQu√© establece el Principio de Pareto (Regla del 80/20) en el an√°lisis de problemas industriales?", opt:["El 80% de los efectos provienen del 20% de las causas","La repartici√≥n equitativa 50/50","Que solo el 10% de las piezas fallan"], c:0},
            {q:"¬øQu√© significan las siglas EPP en seguridad industrial?", opt:["Equipo de Protecci√≥n Personal","Energ√≠a de Procesos Primarios","Entrega de Pagos Puntuales"], c:0}
        ],
        conta: [
            {q:"En contabilidad, ¬øqu√© representa el concepto de 'Activo'?", opt:["Bienes y derechos propiedad de la empresa","Deudas y obligaciones pendientes","Gastos de administraci√≥n"], c:0},
            {q:"¬øQu√© representa el concepto de 'Pasivo' en el balance general?", opt:["Derechos de cobro","Obligaciones y deudas de la entidad","Capital aportado por socios"], c:1},
            {q:"¬øQu√© es el 'Capital Contable' y c√≥mo se compone?", opt:["Aportaciones de socios m√°s utilidades retenidas","Total de deudas con el banco","Venta total del mes"], c:0},
            {q:"¬øCu√°l es la tasa general del Impuesto al Valor Agregado (IVA) vigente en M√©xico?", opt:["10%","15%","16%"], c:2},
            {q:"¬øC√≥mo se define t√©cnicamente la 'Utilidad' en un ejercicio contable?", opt:["Es la ganancia obtenida cuando los ingresos superan a los egresos","Es la p√©rdida total del dinero","Es el gasto de operaci√≥n"], c:0},
            {q:"¬øQu√© es el Balance General y para qu√© sirve?", opt:["Un estado financiero que muestra la situaci√≥n de activos, pasivos y capital","Un tipo de cheque bancario","Una nota de remisi√≥n"], c:0},
            {q:"¬øQu√© significa realizar un 'Cargo' en una cuenta contable?", opt:["Registrar una cantidad en el lado izquierdo (Debe)","Registrar una cantidad en el lado derecho (Haber)","Guardar dinero en la caja"], c:0},
            {q:"¬øQu√© significa realizar un 'Abono' en una cuenta contable?", opt:["Registrar una cantidad en el lado izquierdo (Debe)","Registrar una cantidad en el lado derecho (Haber)","Pedir un pr√©stamo al banco"], c:1},
            {q:"¬øCu√°l es la funci√≥n principal de un Auditor contable?", opt:["Revisar y verificar la exactitud de los estados financieros","Vender productos a los clientes","Limpiar las oficinas"], c:0},
            {q:"¬øQu√© significan las siglas ISR y sobre qu√© se aplica?", opt:["Impuesto Sobre la Renta (sobre las ganancias)","Impuesto sobre Ventas","Impuesto sobre Compras"], c:0}
        ],
        psico: [
            {q:"¬øQui√©n es el fundador del Psicoan√°lisis y propuso la teor√≠a del inconsciente?", opt:["Sigmund Freud","B.F. Skinner","Max Wertheimer"], c:0},
            {q:"¬øQu√© representa la Pir√°mide de Maslow en la psicolog√≠a humanista?", opt:["La jerarqu√≠a de las necesidades humanas","Una caja de experimentos conductuales","Un c√≠rculo de apoyo social"], c:0},
            {q:"¬øC√≥mo se define t√©cnicamente una 'Fobia'?", opt:["Un miedo intenso e irracional hacia algo espec√≠fico","Un gusto exagerado por las alturas","Un sentimiento de amor profundo"], c:0},
            {q:"¬øQu√© es la 'Empat√≠a' y para qu√© sirve en las relaciones humanas?", opt:["La capacidad de ponerse en el lugar de la otra persona","La acci√≥n de juzgar a los dem√°s r√°pidamente","La capacidad de re√≠rse de los problemas"], c:0},
            {q:"¬øQu√© significa el t√©rmino 'Resiliencia' en el comportamiento humano?", opt:["La capacidad de superar y adaptarse a situaciones traum√°ticas","El olvido total de los recuerdos negativos","Sentir enojo constante por el pasado"], c:0},
            {q:"¬øQu√© es el Condicionamiento Cl√°sico, propuesto por Iv√°n P√°vlov?", opt:["Aprendizaje mediante asociaci√≥n de est√≠mulos","El estudio de los sue√±os","Un tipo de terapia grupal"], c:0},
            {q:"¬øA qu√© se refiere el t√©rmino 'Inteligencia Emocional'?", opt:["Capacidad de reconocer y gestionar emociones propias y ajenas","Capacidad de resolver problemas matem√°ticos r√°pido","Capacidad de leer mentes"], c:0},
            {q:"¬øCu√°l es el objeto de estudio principal de la Psicolog√≠a Cognitiva?", opt:["Los procesos mentales como memoria, lenguaje y percepci√≥n","El comportamiento de los animales en la selva","La estructura de los huesos del cr√°neo"], c:0},
            {q:"¬øQu√© define al trastorno de Ansiedad seg√∫n la psicolog√≠a cl√≠nica?", opt:["Preocupaci√≥n excesiva y persistente que interfiere con la vida","Sentirse feliz todo el tiempo","Tener mucha hambre por las noches"], c:0},
            {q:"¬øQu√© es el 'Rapport' en el contexto de una entrevista psicol√≥gica?", opt:["Establecer una relaci√≥n de confianza y armon√≠a con el paciente","Hacer un examen de sangre","Criticar las acciones del paciente"], c:0}
        ]
    };

    let catA='', idx=0, pts=0;
    const mats = { ingles:'üî§ Ingl√©s', excel:'üìä Excel', admin:'üíº Admin', industrial:'‚öôÔ∏è Industrial', conta:'üí∞ Conta', psico:'üß† Psico', nominas:'üìÑ N√≥minas', paginas:'üåê P√°ginas Web' };
    
    function initApp() {
        const grid = document.getElementById('menu');
        Object.keys(mats).forEach(m => {
            let d = document.createElement('div'); d.className = 'cat'; d.innerHTML = `<b>${mats[m]}</b>`;
            d.onclick = () => { 
                if(m === 'nominas') go('nominas'); 
                else if(m === 'paginas') go('paginas');
                else { catA=m; idx=0; pts=0; go(3); cargar(); } 
            };
            grid.appendChild(d);
        });
        showStats();
    }

    function go(n) {
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        const target = (typeof n === 'string') ? 's-'+n : 's'+n;
        document.getElementById(target).classList.add('active');
        if(n === 1) showStats();
    }

    function cargar() {
        let q = db[catA][idx];
        document.getElementById('q-head').innerText = `${catA.toUpperCase()} - ${idx+1}/${db[catA].length}`;
        document.getElementById('q-txt').innerText = q.q;
        document.getElementById('fb-box').style.display = 'none';
        let img = document.getElementById('q-img');
        if(q.img) { img.src = q.img; img.style.display = 'block'; } else { img.style.display = 'none'; }
        document.getElementById('v-ui').style.display = (catA === 'ingles') ? 'block' : 'none';
        let opts = document.getElementById('options');
        opts.innerHTML = '';
        q.opt.forEach((o, i) => {
            let b = document.createElement('button'); b.className = 'btn-opt'; b.id = 'opt-' + i; b.innerText = o;
            b.onclick = () => validar(i); opts.appendChild(b);
        });
    }

    function validar(i) {
        let q = db[catA][idx];
        document.querySelectorAll('.btn-opt').forEach(b => b.disabled = true);
        document.getElementById('fb-box').style.display = 'block';
        let sel = document.getElementById('opt-' + i);
        let cor = document.getElementById('opt-' + q.c);
        if(i === q.c) { pts++; sel.style.background = "#28a745"; document.getElementById('fb-txt').innerText="¬°CORRECTO! ‚úÖ"; }
        else { sel.style.background = "#dc3545"; cor.style.background = "#28a745"; document.getElementById('fb-txt').innerText="INCORRECTO ‚ùå"; }
    }

    function sig() { idx++; if(idx < db[catA].length) cargar(); else { document.getElementById('res-txt').innerText = pts; go(4); } }

    function enviarVariasRespuestas() {
        const tel = document.getElementById('user-phone').value;
        const boxes = document.querySelectorAll('input[name="tema"]:checked');
        if(!tel || boxes.length === 0) return alert("Por favor ingresa tu tel√©fono y selecciona al menos un tema.");
        let temasElegidos = Array.from(boxes).map(cb => cb.value).join(", ");
        
        fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({telefono: tel, interes: temasElegidos, fecha: new Date().toLocaleString()}) })
        .then(() => {
            window.open(`https://wa.me/4423971141?text=${encodeURIComponent("Hola, solicito informaci√≥n sobre: " + temasElegidos + ". Contacto: " + tel)}`, '_blank');
            alert("Solicitud enviada.");
            go(1);
        });
    }

    function compartirWhatsApp() {
        const mensaje = `¬°Hola! Te comparto esta p√°gina para asesor√≠as acad√©micas: ${window.location.href}`;
        window.open(`https://wa.me/?text=${encodeURIComponent(mensaje)}`, '_blank');
    }

    function calcularVillanueva() {
        const sd = parseFloat(document.getElementById('v-sd').value);
        const dias = parseFloat(document.getElementById('v-dias').value);
        if(!sd || !dias) return alert("Llena sueldo y d√≠as.");
        const base = (sd * dias) + ((sd / 6) * dias);
        document.getElementById('v-l-base').innerText = `$${base.toFixed(2)}`;
        document.getElementById('v-l-isr').innerText = `$${(base * 0.09).toFixed(2)}`;
        document.getElementById('v-l-imss').innerText = `$${(base * 0.03).toFixed(2)}`;
        document.getElementById('v-l-neto').innerText = `$${(base * 0.88).toFixed(2)}`;
        document.getElementById('v-desglose').style.display = 'block';
    }

    function descargarVillanueva() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const n = document.getElementById('v-nombre').value || "Empleado";
        doc.setFontSize(18); doc.text("RECIBO - EMPRESA VILLANUEVA", 20, 20);
        doc.autoTable({ startY: 40, head: [['Concepto', 'Monto']], body: [['Sueldo Base', document.getElementById('v-l-base').innerText], ['Retenci√≥n ISR', document.getElementById('v-l-isr').innerText], ['Retenci√≥n IMSS', document.getElementById('v-l-imss').innerText], ['PAGO NETO', document.getElementById('v-l-neto').innerText]] });
        doc.save(`Recibo_${n}.pdf`);
    }

    let haVotado = false;
    function setRate(n) {
        if(!haVotado) {
            let t = parseFloat(localStorage.getItem('totalS') || 0) + n;
            let c = parseInt(localStorage.getItem('countS') || 0) + 1;
            localStorage.setItem('totalS', t); 
            localStorage.setItem('countS', c);
            haVotado = true;
        }
        document.querySelectorAll('#star-box span').forEach((s, i) => s.className = (i < n) ? 'gold' : '');
        showStats();
    }

    function showStats() {
        let t = parseFloat(localStorage.getItem('totalS') || 0);
        let c = parseInt(localStorage.getItem('countS') || 0);
        let avg = c === 0 ? 0 : (t / c).toFixed(1);
        let starsStr = "";
        for(let i=1; i<=5; i++) starsStr += (i <= Math.round(avg)) ? "‚òÖ" : "‚òÜ";
        const textoFinal = `Calificaci√≥n: ${starsStr} ${avg} (${c} votos)`;
        if(document.getElementById('stats-stars')) document.getElementById('stats-stars').innerText = textoFinal;
        if(document.getElementById('welcome-stats')) document.getElementById('welcome-stats').innerText = `‚≠ê ${textoFinal}`;
    }

    function hablar() { let m = new SpeechSynthesisUtterance(db[catA][idx].q); m.lang = 'en-US'; window.speechSynthesis.speak(m); }
    function escuchar() { 
        const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;
        if(!Rec) return;
        const r = new Rec(); r.lang = 'en-US';
        r.onstart = () => document.getElementById('v-feed').innerText = "Escuchando...";
        r.onresult = (e) => document.getElementById('v-feed').innerText = `Dijiste: "${e.results[0][0].transcript}"`;
        r.start();
    }
</script>
</body>
</html>